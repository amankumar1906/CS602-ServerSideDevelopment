<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Baby Name Finder</title>
</head>

<body>
    <h1>Baby Name Finder</h1>

    <label for="genderSelector">Select Gender:</label>
    <select id="genderSelector">
        <option value="boy">Boy</option>
        <option value="girl">Girl</option>
    </select>
    <button id="fetchNames">Fetch Names</button>

    <ul id="nameList"></ul>

    <h2>Liked Names</h2>
    <ul id="likedNamesList"></ul>

    <script>
        async function getNewNames(gender) {
            const response = await fetch('/new-names', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({ gender })
            });
            return await response.json();
        }

        function displayNames(names) {
        const nameList = document.getElementById('nameList');
        nameList.innerHTML = '';

        names.forEach(name => {
            const listItem = document.createElement('li');
            const nameSpan = document.createElement('span');
            nameSpan.textContent = name;
            
            const likeButton = document.createElement('button');
            likeButton.textContent = '❤️'; // Heart symbol
            likeButton.style.marginLeft = '10px';
            
            likeButton.addEventListener('click', async () => {
                await likeName(name);
                updateLikedNames();
            });
            
            listItem.appendChild(nameSpan);
            listItem.appendChild(likeButton);
            nameList.appendChild(listItem);
        });
}


        async function likeName(name) {
            const response = await fetch('/like-name', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({ name })
            });
            return await response.json();
        }

        async function getLikedNames() {
            const response = await fetch('/liked-names');
            return await response.json();
        }

        async function updateLikedNames() {
            const likedNamesList = document.getElementById('likedNamesList');
            likedNamesList.innerHTML = '';

            const names = await getLikedNames();
            names.forEach(name => {
                const listItem = document.createElement('li');
                listItem.textContent = name;
                likedNamesList.appendChild(listItem);
            });
        }

        document.getElementById('fetchNames').addEventListener('click', async () => {
            const gender = document.getElementById('genderSelector').value;
            const names = await getNewNames(gender);
            displayNames(names);
        });

        updateLikedNames();
    </script>
</body>

</html>
